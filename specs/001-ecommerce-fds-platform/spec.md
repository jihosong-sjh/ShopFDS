# 기능 명세서: AI/ML 기반 이커머스 FDS 플랫폼

**Feature Branch**: `001-ecommerce-fds-platform`
**Created**: 2025-11-13
**Status**: Draft
**Input**: 실제 운영 가능한 이커머스 플랫폼을 구축한 후, 이를 기반으로 AI/ML 기반 FDS(Fraud Detection System)를 통합하여 사기 거래를 실시간으로 탐지하고 대응하는 종합 보안 솔루션

## 프로젝트 개요

본 프로젝트는 실제 운영 가능한 이커머스 플랫폼을 구축한 후, 이를 기반으로 AI/ML 기반 FDS(Fraud Detection System)를 통합하여 사기 거래를 실시간으로 탐지하고 대응하는 종합 보안 솔루션을 개발하는 것을 목표로 합니다.

### 개발 단계

**Phase 1: 이커머스 플랫폼 (기반 시스템)**
- 핵심 기능: 회원가입/로그인, 상품 카탈로그, 장바구니, 주문/결제 프로세스, 주문 추적
- 관리자 기능: 상품 관리, 주문 관리, 회원 관리, 매출 대시보드
- 데이터 수집: 모든 사용자 행동 로그, 거래 데이터, 세션 정보를 체계적으로 수집/저장

**Phase 2: FDS 통합 시스템**
- 실시간 위험 평가: 각 거래에 대한 위험 점수 산정 (0-100)
- 다층 탐지 엔진: 룰 기반 탐지, ML 기반 이상 탐지, CTI 연동
- 대응 자동화: 위험도에 따른 단계별 대응 (추가 인증, 거래 보류, 자동 차단)
- 운영 대시보드: 실시간 모니터링, 알림, 수동 검토 인터페이스

### 비즈니스 가치

- **손실 방지**: 카드 도용, 계정 탈취, 환불 사기 등으로 인한 직접적 금전 손실 최소화
- **운영 효율화**: 수동 검토 작업 80% 감소, 자동화된 위험 관리
- **고객 신뢰**: 안전한 거래 환경 제공으로 브랜드 가치 향상
- **규제 준수**: PCI-DSS, 개인정보보호법 등 컴플라이언스 대응

### 기술적 목표

- **실시간 처리**: 100ms 이내 위험 평가 완료
- **정확도**: 정탐률 95% 이상, 오탐률 2% 이하
- **확장성**: 초당 1,000건 이상 거래 처리 가능
- **학습 능력**: 새로운 사기 패턴 자동 학습 및 적응

## 사용자 시나리오 & 테스트 *(필수)*

### 사용자 스토리 1 - 일반 고객의 정상 거래 플로우 (우선순위: P1)

일반 고객이 이커머스 플랫폼에서 상품을 검색하고, 장바구니에 담아 결제를 완료하는 전체 쇼핑 여정입니다. 이 과정에서 FDS는 백그라운드에서 실시간으로 거래를 분석하지만, 정상 거래로 판단되면 고객에게 추가적인 인증 절차를 요구하지 않습니다.

**이 우선순위인 이유**: 이커머스 플랫폼의 핵심 가치 제안이며, 대부분의 고객이 경험하는 주요 사용자 여정입니다. 정상 거래에서의 원활한 경험은 고객 만족도와 직결됩니다.

**독립 테스트**: 회원가입부터 주문 완료까지 전체 플로우를 테스트하고, FDS가 정상 거래를 방해하지 않는지 확인할 수 있습니다. 구매 완료율과 평균 체크아웃 시간을 측정하여 검증합니다.

**수용 시나리오**:

1. **Given** 고객이 회원가입을 완료하고 로그인한 상태일 때, **When** 상품을 검색하고 원하는 상품을 장바구니에 추가하면, **Then** 장바구니에 선택한 상품이 정확히 표시되고 수량 조정이 가능해야 합니다.

2. **Given** 고객이 장바구니에 상품을 담은 상태일 때, **When** 결제 페이지로 이동하여 배송지와 결제 정보를 입력하고 주문을 완료하면, **Then** FDS가 백그라운드에서 위험 평가를 수행하되, 정상 거래로 판단되어 추가 인증 없이 주문이 즉시 완료되어야 합니다.

3. **Given** 고객이 주문을 완료한 상태일 때, **When** 주문 추적 페이지에 접근하면, **Then** 주문 상태, 배송 정보, 예상 도착 시간을 확인할 수 있어야 합니다.

4. **Given** 고객의 모든 행동이 정상 패턴 범위 내에 있을 때, **When** 결제를 진행하면, **Then** FDS 위험 점수가 낮게 산정되고(0-30점), 추가 인증 없이 3분 이내에 전체 결제 프로세스가 완료되어야 합니다.

---

### 사용자 스토리 2 - 의심 거래 시 단계적 인증 (우선순위: P1)

FDS가 거래를 의심스럽다고 판단할 때(중간 위험도), 고객에게 추가 인증(OTP, 생체인증 등)을 요청하는 과정입니다. 정당한 고객이라면 추가 인증을 통해 거래를 완료할 수 있습니다.

**이 우선순위인 이유**: 실제 사기와 정상 거래를 구분하는 핵심 메커니즘이며, 오탐으로 인한 고객 불편을 최소화하면서도 보안을 유지하는 균형점입니다.

**독립 테스트**: 의심스러운 패턴(예: 평소와 다른 지역에서의 로그인, 고액 결제)을 시뮬레이션하고, 추가 인증 플로우가 정상적으로 작동하는지, 인증 성공 시 거래가 완료되는지 검증할 수 있습니다.

**수용 시나리오**:

1. **Given** 고객이 평소와 다른 지역에서 로그인하여 고액 상품을 구매하려 할 때, **When** 결제를 시도하면, **Then** FDS가 중간 위험도(40-70점)를 산정하고, 추가 인증(OTP 또는 생체인증) 요청 화면이 표시되어야 합니다.

2. **Given** 추가 인증이 요청된 상태일 때, **When** 고객이 올바른 OTP를 입력하거나 생체인증을 성공하면, **Then** 거래가 승인되고 주문이 정상적으로 완료되어야 합니다.

3. **Given** 추가 인증이 요청된 상태일 때, **When** 고객이 3회 연속 인증에 실패하면, **Then** 거래가 일시적으로 차단되고, 계정 보안 확인을 위한 안내 메시지가 표시되어야 합니다.

4. **Given** 고객이 추가 인증을 완료한 상태일 때, **When** 다음 거래를 시도하면, **Then** 최근 인증 이력이 고려되어 위험 점수가 조정되어야 합니다.

---

### 사용자 스토리 3 - 고위험 거래 자동 차단 및 검토 (우선순위: P1)

FDS가 고위험 거래를 탐지하여 자동으로 차단하고, 보안팀이 수동으로 검토하는 과정입니다. 이는 명백한 사기 시도를 즉시 차단하여 금전적 손실을 방지합니다.

**이 우선순위인 이유**: 실제 사기로 인한 직접적인 금전 손실을 방지하는 마지막 방어선이며, 비즈니스의 재정적 건전성을 보호합니다.

**독립 테스트**: 알려진 사기 패턴(예: 악성 IP, 도난 카드 정보, 비정상적인 구매 패턴)을 시뮬레이션하고, 자동 차단이 발동되는지, 보안팀 대시보드에 알림이 전달되는지 검증할 수 있습니다.

**수용 시나리오**:

1. **Given** 알려진 악성 IP에서 접속한 사용자가 있을 때, **When** 로그인 또는 결제를 시도하면, **Then** FDS가 고위험(80-100점)으로 판단하고 즉시 거래를 차단하며, 보안팀 대시보드에 실시간 알림을 전송해야 합니다.

2. **Given** 고객이 짧은 시간 내에 여러 개의 다른 카드로 결제를 시도할 때(velocity check 위반), **When** 연속적인 결제 시도가 감지되면, **Then** 계정이 자동으로 일시 정지되고, 보안팀에 상세한 거래 이력과 위험 요인 분석 결과가 전달되어야 합니다.

3. **Given** 거래가 자동 차단된 상태일 때, **When** 보안팀이 대시보드에서 거래 상세 정보를 검토하면, **Then** 차단 사유, 위험 점수 산정 근거, 사용자 행동 로그, 유사한 과거 사기 패턴과의 비교 결과를 확인할 수 있어야 합니다.

4. **Given** 보안팀이 거래를 검토한 결과 오탐으로 판단했을 때, **When** 차단을 해제하고 거래를 승인하면, **Then** 고객에게 즉시 알림이 전송되고, FDS 학습 데이터에 피드백이 반영되어 향후 유사 케이스의 오탐률이 감소해야 합니다.

---

### 사용자 스토리 4 - 관리자의 상품 및 주문 관리 (우선순위: P2)

관리자가 상품을 등록하고, 재고를 관리하며, 주문을 처리하는 백오피스 운영 시나리오입니다.

**이 우선순위인 이유**: 플랫폼 운영의 필수 기능이지만, 초기 MVP에서는 제한된 상품으로 운영 가능하므로 P1보다 낮은 우선순위입니다.

**독립 테스트**: 관리자 계정으로 로그인하여 상품 CRUD 작업, 재고 업데이트, 주문 상태 변경이 정상적으로 작동하는지 검증할 수 있습니다.

**수용 시나리오**:

1. **Given** 관리자가 로그인한 상태일 때, **When** 새 상품을 등록하면(상품명, 설명, 가격, 재고, 이미지), **Then** 상품이 카탈로그에 추가되고 즉시 고객에게 노출되어야 합니다.

2. **Given** 상품이 등록된 상태일 때, **When** 재고 수량을 업데이트하면, **Then** 변경 사항이 즉시 반영되고, 재고가 0이 되면 자동으로 품절 상태로 표시되어야 합니다.

3. **Given** 고객 주문이 접수된 상태일 때, **When** 관리자가 주문 관리 페이지에서 주문 상태를 "배송 중"으로 변경하면, **Then** 고객에게 배송 시작 알림이 전송되고 주문 추적 정보가 업데이트되어야 합니다.

4. **Given** 여러 주문이 있을 때, **When** 관리자가 주문 목록을 조회하면, **Then** 주문 날짜, 고객 정보, 주문 금액, 상태별로 필터링 및 정렬이 가능해야 합니다.

---

### 사용자 스토리 5 - 보안팀의 실시간 모니터링 및 룰 관리 (우선순위: P2)

보안팀이 실시간 대시보드를 통해 거래 현황을 모니터링하고, FDS 탐지 룰을 동적으로 조정하는 시나리오입니다.

**이 우선순위인 이유**: FDS의 효과성을 지속적으로 개선하기 위한 운영 도구이지만, 초기에는 기본 룰셋으로 운영 가능하므로 P2로 설정합니다.

**독립 테스트**: 보안팀 대시보드에 접근하여 실시간 지표 확인, 룰 추가/수정, A/B 테스트 설정이 가능한지 검증할 수 있습니다.

**수용 시나리오**:

1. **Given** 보안팀이 대시보드에 로그인한 상태일 때, **When** 메인 화면을 조회하면, **Then** 실시간 거래 건수, 평균 위험 점수, 차단된 거래 수, 시간대별 추이 그래프가 표시되어야 합니다.

2. **Given** 새로운 사기 패턴이 발견된 상태일 때, **When** 보안팀이 새로운 탐지 룰을 추가하면(예: "특정 국가에서 고액 결제 시 추가 인증 요구"), **Then** 코드 배포 없이 즉시 룰이 활성화되고, 해당 패턴에 대한 탐지가 시작되어야 합니다.

3. **Given** 기존 룰의 효과를 검증하고자 할 때, **When** A/B 테스트를 설정하면(기존 룰 vs 새 룰), **Then** 트래픽의 일부(예: 20%)에만 새 룰이 적용되고, 양측의 성과 지표(정탐률, 오탐률, 사용자 이탈률)가 별도로 집계되어야 합니다.

4. **Given** 고위험 거래 알림이 발생한 상태일 때, **When** 보안팀이 알림을 클릭하면, **Then** 해당 거래의 상세 페이지로 이동하고, 고객 행동 로그, 디바이스 정보, 결제 정보, AI 모델의 예측 근거가 시각화되어 표시되어야 합니다.

---

### 사용자 스토리 6 - ML 모델 학습 및 성능 개선 (우선순위: P3)

FDS의 ML 모델이 축적된 거래 데이터와 피드백을 기반으로 주기적으로 재학습되어 탐지 정확도를 지속적으로 개선하는 시나리오입니다.

**이 우선순위인 이유**: 초기에는 룰 기반 탐지와 기본 ML 모델로도 충분히 작동하며, 데이터가 축적된 이후에 의미 있는 학습이 가능하므로 P3로 설정합니다.

**독립 테스트**: 일정량의 거래 데이터와 피드백이 수집된 후, 재학습 프로세스를 실행하고, 새 모델의 성능 지표(정확도, 정밀도, 재현율)가 개선되었는지 검증할 수 있습니다.

**수용 시나리오**:

1. **Given** 일주일간의 거래 데이터와 보안팀의 검토 피드백이 축적된 상태일 때, **When** 자동 또는 수동으로 모델 재학습을 트리거하면, **Then** 새로운 사기 패턴을 학습한 모델이 생성되고, 성능 비교 리포트가 생성되어야 합니다.

2. **Given** 새 모델이 학습된 상태일 때, **When** 보안팀이 성능 비교 리포트를 검토하면, **Then** 기존 모델 대비 정탐률, 오탐률, F1 스코어 변화가 명확히 표시되고, 개선/저하 사항이 강조되어야 합니다.

3. **Given** 새 모델의 성능이 검증된 상태일 때, **When** 보안팀이 새 모델을 프로덕션에 배포하면, **Then** 점진적 롤아웃(카나리 배포)이 실행되고, 실시간으로 성능 지표가 모니터링되어야 합니다.

4. **Given** 새 모델이 배포된 후 성능이 저하된 것으로 확인될 때, **When** 보안팀이 롤백을 실행하면, **Then** 이전 모델로 즉시 복구되고, 실패 원인이 로그에 기록되어야 합니다.

---

### 엣지 케이스

#### 거래 처리 관련
- 결제 게이트웨이 타임아웃 발생 시 주문 상태는 어떻게 처리되는가? (주문 보류 상태로 전환하고, 결제 상태 확인 후 자동 업데이트)
- 동일 고객이 동시에 여러 디바이스에서 결제를 시도하는 경우 어떻게 처리하는가? (각 거래를 독립적으로 평가하되, 동시 결제 패턴을 위험 요인으로 고려)
- 재고가 0인 상품을 장바구니에 담은 상태에서 재고가 다시 입고되면 어떻게 알리는가? (재입고 알림 기능, 장바구니에 계속 유지)

#### FDS 관련
- FDS 시스템이 일시적으로 다운된 경우 거래 처리는 어떻게 되는가? (Fail-open 정책: 기본 룰 기반 검증만 수행하여 거래 중단 최소화, 모든 거래를 사후 검토 큐에 추가)
- 위험 점수 산정 중 외부 CTI 서비스 응답이 지연되는 경우? (타임아웃 설정(예: 50ms), 캐시된 정보 사용, 타임아웃 시 해당 요인 제외하고 평가 진행)
- 정당한 고객이 연속으로 오탐 차단을 경험하는 경우 어떻게 해결하는가? (고객 서비스 팀이 수동으로 화이트리스트 추가 가능, 고객 이의제기 프로세스 제공)

#### 계정 및 보안
- 고객이 비밀번호를 잊어버린 경우 어떻게 복구하는가? (이메일 기반 비밀번호 재설정 링크 전송, 링크 유효 시간 30분)
- 관리자 계정이 탈취된 것으로 의심되는 경우? (관리자 계정에도 FDS 적용, 비정상 활동 시 2차 인증 요구, 중요 작업 로그 자동 기록)
- 고객이 계정 삭제를 요청하는 경우 데이터는 어떻게 처리되는가? (개인정보는 즉시 삭제, 익명화된 거래 데이터는 FDS 학습을 위해 일정 기간 보관)

#### 성능 및 확장성
- 갑작스러운 트래픽 급증(예: 특가 이벤트) 시 FDS 성능이 저하되는 경우? (위험 평가 우선순위 큐 적용, 고액 거래 우선 평가, 낮은 금액은 간소화된 평가)
- 특정 지역에서 접속이 폭주하는 경우 네트워크 지연을 어떻게 처리하는가? (지역별 CDN 활용, 응답 시간 모니터링, 자동 스케일링)

#### 데이터 관련
- 고객이 이전 주문 데이터를 삭제 요청하는 경우? (주문 내역은 법적 보관 기간 동안 유지, 개인 식별 정보만 마스킹 처리)
- ML 모델 학습 데이터에 편향이 발견된 경우? (편향 탐지 지표 모니터링, 데이터 리샘플링 및 재학습, 공정성 평가 지표 추가)

## 요구사항 *(필수)*

### 기능 요구사항

#### Phase 1: 이커머스 플랫폼 기반 기능

**회원 관리**
- **FR-001**: 시스템은 이메일 기반 회원가입을 지원해야 합니다. (이메일 중복 확인, 비밀번호 강도 검증 포함)
- **FR-002**: 시스템은 이메일/비밀번호 방식의 로그인을 지원해야 합니다.
- **FR-003**: 사용자는 비밀번호 재설정 기능을 사용할 수 있어야 합니다. (이메일 인증 기반)
- **FR-004**: 시스템은 모든 회원 활동 로그를 기록해야 합니다. (로그인 시간, IP 주소, 디바이스 정보, 주요 액션)

**상품 카탈로그**
- **FR-005**: 시스템은 상품 목록을 카테고리별로 조회할 수 있어야 합니다.
- **FR-006**: 사용자는 상품명, 카테고리, 가격 범위로 상품을 검색할 수 있어야 합니다.
- **FR-007**: 각 상품은 이름, 설명, 가격, 재고 수량, 이미지, 카테고리 정보를 포함해야 합니다.
- **FR-008**: 재고가 없는 상품은 "품절" 상태로 표시되어야 하며, 구매가 불가능해야 합니다.

**장바구니**
- **FR-009**: 사용자는 상품을 장바구니에 추가할 수 있어야 합니다.
- **FR-010**: 사용자는 장바구니에서 상품 수량을 조정하거나 삭제할 수 있어야 합니다.
- **FR-011**: 장바구니는 로그인 사용자의 경우 세션 종료 후에도 유지되어야 합니다.
- **FR-012**: 장바구니는 총 금액을 실시간으로 계산하여 표시해야 합니다.

**주문 및 결제**
- **FR-013**: 사용자는 장바구니에서 체크아웃 프로세스를 시작할 수 있어야 합니다.
- **FR-014**: 체크아웃 시 배송지 정보(이름, 주소, 전화번호)를 입력받아야 합니다.
- **FR-015**: 시스템은 신용카드 결제를 지원해야 합니다.
- **FR-016**: 주문 완료 시 고유한 주문 번호가 생성되어야 합니다.
- **FR-017**: 주문 완료 시 주문 확인 정보가 사용자에게 표시되어야 합니다.
- **FR-018**: 모든 거래 데이터(거래 금액, 결제 수단, 결제 시각, IP 주소, 디바이스 정보)가 기록되어야 합니다.

**주문 추적**
- **FR-019**: 사용자는 주문 내역을 조회할 수 있어야 합니다.
- **FR-020**: 각 주문은 상태(주문 접수, 결제 완료, 배송 준비, 배송 중, 배송 완료)를 가져야 합니다.
- **FR-021**: 사용자는 진행 중인 주문의 배송 상태를 실시간으로 확인할 수 있어야 합니다.

**관리자 기능**
- **FR-022**: 관리자는 상품을 등록, 수정, 삭제할 수 있어야 합니다.
- **FR-023**: 관리자는 재고 수량을 업데이트할 수 있어야 합니다.
- **FR-024**: 관리자는 전체 주문 목록을 조회하고, 주문 상태를 변경할 수 있어야 합니다.
- **FR-025**: 관리자는 회원 목록을 조회하고, 회원 상태(활성/정지)를 변경할 수 있어야 합니다.
- **FR-026**: 관리자는 매출 대시보드에서 일별/주별/월별 매출, 주문 건수, 평균 주문 금액을 확인할 수 있어야 합니다.

#### Phase 2: FDS 통합 시스템

**실시간 위험 평가**
- **FR-027**: 시스템은 모든 거래에 대해 실시간으로 위험 점수(0-100)를 산정해야 합니다.
- **FR-028**: 위험 점수 산정은 결제 승인 전에 완료되어야 하며, 목표 처리 시간은 100ms 이내입니다.
- **FR-029**: 위험 점수는 여러 위험 요인의 가중치 합산으로 계산되어야 합니다.

**룰 기반 탐지 엔진**
- **FR-030**: 시스템은 velocity check를 수행해야 합니다. (동일 계정/IP/카드로 단시간 내 반복 거래 탐지)
- **FR-031**: 시스템은 거래 금액 임계값 룰을 적용해야 합니다. (평소 구매 패턴 대비 비정상적으로 높은 금액 탐지)
- **FR-032**: 시스템은 지역 불일치를 탐지해야 합니다. (등록된 주소와 배송지/IP 위치의 불일치)
- **FR-033**: 시스템은 비정상 시간대 거래를 탐지해야 합니다. (심야 시간 고액 거래 등)
- **FR-034**: 보안팀은 새로운 탐지 룰을 코드 배포 없이 추가/수정할 수 있어야 합니다.

**ML 기반 이상 탐지**
- **FR-035**: 시스템은 사용자 행동 패턴 이상을 탐지하는 ML 모델을 포함해야 합니다.
- **FR-036**: ML 모델은 과거 정상 거래와 사기 거래 데이터를 학습하여 예측해야 합니다.
- **FR-037**: 시스템은 주기적으로 새로운 데이터로 ML 모델을 재학습할 수 있어야 합니다.
- **FR-038**: ML 모델은 예측 결과와 함께 주요 위험 요인(feature importance)을 제공해야 합니다.

**CTI(Cyber Threat Intelligence) 연동**
- **FR-039**: 시스템은 알려진 악성 IP 데이터베이스와 연동하여 접속 IP를 검증해야 합니다.
- **FR-040**: 시스템은 도난 카드 정보 데이터베이스와 연동하여 결제 정보를 검증해야 합니다.
- **FR-041**: 외부 CTI 서비스 응답 지연 시 타임아웃(50ms)을 적용하고, 캐시된 정보를 사용해야 합니다.

**자동 대응 메커니즘**
- **FR-042**: 위험 점수가 0-30점(낮은 위험)인 경우, 추가 조치 없이 거래를 승인해야 합니다.
- **FR-043**: 위험 점수가 40-70점(중간 위험)인 경우, 추가 인증(OTP, 생체인증)을 요구해야 합니다.
- **FR-044**: 위험 점수가 80-100점(고위험)인 경우, 거래를 즉시 차단하고 보안팀에 알림을 전송해야 합니다.
- **FR-045**: 추가 인증 실패 3회 시 계정을 일시 정지하고, 계정 소유자에게 보안 알림을 전송해야 합니다.
- **FR-046**: 차단된 거래는 수동 검토 큐에 자동으로 추가되어야 합니다.

**운영 대시보드**
- **FR-047**: 보안팀 대시보드는 실시간 거래 건수, 평균 위험 점수, 차단 건수를 표시해야 합니다.
- **FR-048**: 보안팀은 고위험 거래 알림을 실시간으로 수신해야 합니다.
- **FR-049**: 보안팀은 수동 검토 큐에서 차단된 거래를 상세히 검토할 수 있어야 합니다.
- **FR-050**: 거래 상세 페이지는 위험 점수, 산정 근거, 사용자 행동 로그, 디바이스 정보, 결제 정보를 포함해야 합니다.
- **FR-051**: 보안팀은 차단된 거래를 승인하거나 영구 차단할 수 있어야 합니다.
- **FR-052**: 보안팀의 검토 결과는 ML 모델의 학습 피드백으로 활용되어야 합니다.

**A/B 테스트 및 성능 모니터링**
- **FR-053**: 시스템은 새로운 탐지 룰이나 ML 모델을 트래픽의 일부에만 적용하는 A/B 테스트를 지원해야 합니다.
- **FR-054**: A/B 테스트 결과는 정탐률, 오탐률, 사용자 이탈률을 포함한 성과 지표로 비교되어야 합니다.
- **FR-055**: 시스템은 FDS 성능 지표(평균 응답 시간, 처리량, 에러율)를 모니터링해야 합니다.

### 주요 엔티티

#### 이커머스 플랫폼 엔티티

**User (사용자)**
- 표현하는 것: 플랫폼에 가입한 고객 및 관리자
- 주요 속성: 사용자 ID, 이메일, 이름, 비밀번호(해시), 역할(고객/관리자), 가입일, 최종 로그인 시각, 계정 상태(활성/정지)
- 관계: User는 여러 Order를 가질 수 있음, User는 하나의 Cart를 가짐

**Product (상품)**
- 표현하는 것: 판매 중인 상품
- 주요 속성: 상품 ID, 이름, 설명, 가격, 재고 수량, 카테고리, 이미지 URL, 등록일, 수정일
- 관계: Product는 여러 CartItem, OrderItem에 포함될 수 있음

**Cart (장바구니)**
- 표현하는 것: 사용자가 구매 예정인 상품 목록
- 주요 속성: 장바구니 ID, 사용자 ID, 생성일, 수정일
- 관계: Cart는 여러 CartItem을 포함, Cart는 하나의 User에 속함

**CartItem (장바구니 항목)**
- 표현하는 것: 장바구니에 담긴 개별 상품
- 주요 속성: 항목 ID, 장바구니 ID, 상품 ID, 수량, 추가일
- 관계: CartItem은 하나의 Cart에 속하고, 하나의 Product를 참조

**Order (주문)**
- 표현하는 것: 고객의 구매 주문
- 주요 속성: 주문 ID, 주문 번호, 사용자 ID, 총 금액, 주문 상태(주문 접수/결제 완료/배송 준비/배송 중/배송 완료/취소), 배송지 정보(이름, 주소, 전화번호), 주문일, 결제일
- 관계: Order는 하나의 User에 속하고, 여러 OrderItem을 포함, Order는 하나의 Payment와 연결

**OrderItem (주문 항목)**
- 표현하는 것: 주문에 포함된 개별 상품
- 주요 속성: 항목 ID, 주문 ID, 상품 ID, 수량, 단가(주문 시점의 가격)
- 관계: OrderItem은 하나의 Order에 속하고, 하나의 Product를 참조

**Payment (결제)**
- 표현하는 것: 주문에 대한 결제 정보
- 주요 속성: 결제 ID, 주문 ID, 결제 수단(신용카드), 결제 금액, 결제 상태(대기/완료/실패), 결제일, 거래 번호
- 관계: Payment는 하나의 Order에 속함

#### FDS 엔티티

**Transaction (거래)**
- 표현하는 것: FDS가 평가하는 개별 거래 이벤트
- 주요 속성: 거래 ID, 사용자 ID, 주문 ID, 거래 금액, 거래 시각, IP 주소, 디바이스 정보(User-Agent, 디바이스 유형), 지리적 위치, 위험 점수, 평가 상태(평가 중/승인/차단)
- 관계: Transaction은 하나의 Order와 연결, Transaction은 여러 RiskFactor를 가짐

**RiskFactor (위험 요인)**
- 표현하는 것: 거래의 위험 점수 산정에 기여한 개별 요인
- 주요 속성: 요인 ID, 거래 ID, 요인 유형(velocity_check, amount_threshold, location_mismatch, suspicious_ip 등), 요인 점수, 설명
- 관계: RiskFactor는 하나의 Transaction에 속함

**DetectionRule (탐지 룰)**
- 표현하는 것: FDS가 사용하는 룰 기반 탐지 규칙
- 주요 속성: 룰 ID, 룰 이름, 룰 유형(velocity, threshold, blacklist 등), 조건(JSON 형식), 위험 점수 가중치, 활성화 여부, 생성일, 수정일
- 관계: 독립적 엔티티

**FraudCase (사기 케이스)**
- 표현하는 것: 확정된 사기 거래 사례
- 주요 속성: 케이스 ID, 거래 ID, 사용자 ID, 사기 유형(카드 도용, 계정 탈취, 환불 사기 등), 탐지일, 확정일, 손실 금액, 상태(의심/확정/오탐)
- 관계: FraudCase는 하나의 Transaction과 연결

**ReviewQueue (검토 큐)**
- 표현하는 것: 수동 검토가 필요한 차단된 거래
- 주요 속성: 큐 ID, 거래 ID, 추가일, 검토자 ID, 검토 상태(대기/검토 중/완료), 검토 결과(승인/차단), 검토일, 검토 노트
- 관계: ReviewQueue는 하나의 Transaction과 연결

**MLModel (ML 모델)**
- 표현하는 것: FDS에서 사용하는 기계학습 모델
- 주요 속성: 모델 ID, 모델 이름, 버전, 학습 데이터 기간, 학습일, 성능 지표(정확도, 정밀도, 재현율, F1 스코어), 배포 상태(개발/스테이징/프로덕션), 배포일
- 관계: 독립적 엔티티

**UserBehaviorLog (사용자 행동 로그)**
- 표현하는 것: FDS 학습을 위한 사용자 행동 데이터
- 주요 속성: 로그 ID, 사용자 ID, 세션 ID, 액션 유형(로그인, 상품 조회, 장바구니 추가, 결제 시도 등), 액션 시각, IP 주소, 디바이스 정보, 추가 컨텍스트(JSON 형식)
- 관계: UserBehaviorLog는 하나의 User와 연결

**ThreatIntelligence (위협 인텔리전스)**
- 표현하는 것: 외부 CTI에서 수집한 악성 정보
- 주요 속성: 항목 ID, 유형(IP, 카드 BIN, 이메일 도메인 등), 값, 위협 레벨(낮음/중간/높음), 출처, 등록일, 만료일
- 관계: 독립적 엔티티

## 성공 기준 *(필수)*

### 측정 가능한 결과

#### 사용자 경험 지표

- **SC-001**: 일반 고객은 회원가입부터 첫 구매 완료까지 5분 이내에 완료할 수 있어야 합니다.
- **SC-002**: 정상 거래 시 결제 프로세스는 추가 인증 없이 3분 이내에 완료되어야 합니다.
- **SC-003**: 상품 검색 결과는 1초 이내에 표시되어야 합니다.
- **SC-004**: 장바구니 업데이트는 0.5초 이내에 반영되어야 합니다.

#### FDS 성능 지표

- **SC-005**: 각 거래에 대한 위험 점수 산정은 100ms 이내에 완료되어야 합니다.
- **SC-006**: 시스템은 초당 1,000건 이상의 거래를 처리할 수 있어야 합니다.
- **SC-007**: FDS의 정탐률(True Positive Rate)은 95% 이상이어야 합니다. (실제 사기를 올바르게 탐지한 비율)
- **SC-008**: FDS의 오탐률(False Positive Rate)은 2% 이하여야 합니다. (정상 거래를 잘못 차단한 비율)

#### 비즈니스 지표

- **SC-009**: FDS 도입 후 사기로 인한 금전 손실이 도입 전 대비 80% 이상 감소해야 합니다.
- **SC-010**: 수동 거래 검토 작업량이 FDS 도입 전 대비 80% 감소해야 합니다.
- **SC-011**: 고객 이탈률이 오탐으로 인해 5% 이상 증가하지 않아야 합니다.
- **SC-012**: 주문 완료율(장바구니 → 주문 완료)이 70% 이상이어야 합니다.

#### 운영 효율성 지표

- **SC-013**: 보안팀은 고위험 거래 알림을 5초 이내에 수신해야 합니다.
- **SC-014**: 차단된 거래에 대한 수동 검토는 평균 10분 이내에 완료되어야 합니다.
- **SC-015**: 새로운 탐지 룰 추가 시 시스템 재배포 없이 즉시 적용되어야 합니다.
- **SC-016**: ML 모델 재학습 및 배포는 1시간 이내에 완료되어야 합니다.

#### 시스템 안정성 지표

- **SC-017**: 시스템 가용성은 99.9% 이상이어야 합니다. (월 최대 다운타임 43분)
- **SC-018**: FDS 장애 발생 시에도 기본 거래 처리는 계속 가능해야 합니다. (Fail-open 정책)
- **SC-019**: 데이터베이스 백업은 매일 자동으로 수행되어야 합니다.

#### 학습 및 개선 지표

- **SC-020**: ML 모델은 최소 주 1회 재학습되어야 하며, 새로운 사기 패턴 탐지율이 지속적으로 개선되어야 합니다.
- **SC-021**: 보안팀의 피드백(오탐/정탐)은 100% ML 학습 데이터에 반영되어야 합니다.
- **SC-022**: A/B 테스트 시 양측 그룹의 성과 지표 차이가 통계적으로 유의미한 수준(p < 0.05)으로 측정되어야 합니다.

#### 규정 준수 지표

- **SC-023**: 모든 거래 로그는 최소 3년간 보관되어야 합니다.
- **SC-024**: 개인정보 접근 로그는 100% 기록되어야 하며, 감사 추적이 가능해야 합니다.
- **SC-025**: 고객의 데이터 삭제 요청은 7일 이내에 처리되어야 합니다.

## 가정 사항

본 명세서는 다음과 같은 가정 하에 작성되었습니다:

### 기술 환경
- 시스템은 클라우드 환경에서 운영됩니다. (자동 스케일링 가능)
- 결제 게이트웨이는 외부 서비스를 연동하는 것으로 가정합니다.
- 이메일 발송은 외부 이메일 서비스를 사용합니다.

### 데이터 및 보안
- 결제 정보(카드 번호 등)는 PCI-DSS 준수를 위해 토큰화하여 저장합니다.
- 비밀번호는 bcrypt 또는 유사한 알고리즘으로 해시화하여 저장합니다.
- 모든 통신은 HTTPS를 통해 암호화됩니다.

### 사용자 및 비즈니스
- 초기 런칭 시 국내 시장을 대상으로 하며, 한국어를 지원합니다.
- 배송은 국내 배송만 지원합니다.
- 결제 수단은 신용카드만 지원하며, 추후 확장 가능합니다.
- 환불 정책은 주문 후 7일 이내 가능하며, 배송 전 취소는 즉시 처리됩니다.

### FDS 관련
- 초기 ML 모델 학습을 위한 과거 거래 데이터가 최소한 존재하거나, 외부 사기 데이터셋을 활용합니다.
- CTI 서비스는 외부 제공업체와 API 연동하는 것으로 가정합니다.
- FDS 장애 시 Fail-open 정책을 적용하여 정상 거래가 차단되지 않도록 합니다. (사후 검토 수행)

### 성능 및 확장성
- 초기 트래픽은 일일 1만 건 이하의 거래로 예상하며, 향후 확장 가능하도록 설계합니다.
- 피크 시간대(예: 특가 이벤트)에는 평소 대비 10배의 트래픽이 발생할 수 있습니다.

### 운영 및 지원
- 보안팀은 24시간 대기 체계를 갖추고 있으며, 고위험 알림에 즉시 대응 가능합니다.
- 고객 서비스 팀은 오탐 관련 문의에 대응 가능합니다.

## 범위 제외 사항

본 프로젝트의 범위에서 명시적으로 제외되는 항목은 다음과 같습니다:

### 기능적 제외
- 소셜 로그인(Google, Facebook, Kakao 등) - Phase 1에서는 이메일 로그인만 지원
- 다국어 지원 - 초기에는 한국어만 지원
- 모바일 앱 - 웹 브라우저 기반 반응형 웹만 지원
- 상품 리뷰 및 평점 시스템
- 쿠폰 및 프로모션 코드 시스템
- 적립금 및 포인트 시스템
- 위시리스트 기능
- 상품 추천 시스템 (FDS 추천과는 별개)
- 실시간 채팅 고객 지원
- 정기 구독 서비스
- 해외 배송
- 다양한 결제 수단(계좌이체, 간편결제, 무통장입금 등) - 신용카드만 지원

### FDS 관련 제외
- 딥러닝 기반 고급 이상 탐지 모델 - 초기에는 전통적인 ML 알고리즘 사용
- 그래프 분석 기반 연결망 탐지 (사기 조직 탐지 등)
- 음성/화상 통화 기반 본인 인증
- 디바이스 핑거프린팅 고급 기법 (초기에는 기본 User-Agent 분석만 수행)
- 행동 생체 인증 (타이핑 패턴, 마우스 움직임 등)

### 인프라 및 운영
- 멀티 리전 배포 - 초기에는 단일 리전에서 운영
- 실시간 로그 분석 플랫폼 (초기에는 배치 분석)
- 자동화된 침투 테스트
- 재해 복구 자동화 - 수동 복구 프로세스로 대체

### 규제 및 컴플라이언스
- 국제 표준 인증 획득 (ISO 27001 등) - 준수는 목표로 하되, 공식 인증은 범위 외
- 해외 규제 준수 (GDPR, CCPA 등) - 국내 개인정보보호법만 준수

이러한 제외 항목들은 향후 Phase 3 이후의 확장 로드맵에서 고려될 수 있습니다.
